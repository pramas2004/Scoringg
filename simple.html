<!DOCTYPE html>
<html>
<head>
    <title>Simple Theme</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@500;700;900&display=swap');
        body { background: transparent; margin: 0; overflow: hidden; font-family: 'Roboto', sans-serif; }
        
        .score-pop { animation: pop-effect 0.4s ease-out; }
        @keyframes pop-effect {
            0% { transform: scale(1); color: white; }
            50% { transform: scale(1.3); color: #ffff00; text-shadow: 0 0 10px #ffff00; }
            100% { transform: scale(1); color: white; }
        }

        .tour-badge { position: fixed; bottom: 120px; left: 50%; transform: translateX(-50%); background: #ffcc00; color: black; padding: 5px 30px; font-weight: bold; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.5); text-transform: uppercase; letter-spacing: 1px; font-size: 14px; }
        .scoreboard-container { position: fixed; bottom: 50px; left: 50%; transform: translateX(-50%); display: flex; align-items: center; width: 98%; max-width: 1600px; color: white; text-transform: uppercase; }
        .team-badge { background: linear-gradient(180deg, #004ba0, #002f6c); padding: 15px 20px; border-radius: 50px; font-weight: bold; font-size: 20px; z-index: 2; border: 3px solid white; min-width: 140px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .main-bar { background: linear-gradient(90deg, #e0e0e0 0%, #ffffff 50%, #e0e0e0 100%); height: 70px; flex-grow: 1; margin: 0 -30px; display: flex; align-items: center; justify-content: space-between; border-radius: 15px; position: relative; z-index: 1; color: #002f6c; padding: 0 60px; box-shadow: inset 0 0 20px rgba(0,0,0,0.1); }
        .center-score-pill { background: linear-gradient(180deg, #0056b3, #002a5c); color: white; padding: 5px 40px; border-radius: 40px; text-align: center; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); border: 3px solid #fff; min-width: 280px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .big-score { font-size: 32px; font-weight: 900; letter-spacing: 1px; }
        .overs { font-size: 16px; background: #e74c3c; padding: 2px 6px; border-radius: 4px; margin-left: 10px; vertical-align: middle;}
        
        .batter-info { display: flex; flex-direction: column; font-size: 16px; font-weight: 700; gap: 6px; width: 350px; }
        .batter-row { display: flex; justify-content: space-between; border-bottom: 1px solid #ccc; padding-bottom: 2px; transition: all 0.3s ease; opacity: 0.6; }
        .active-striker { opacity: 1 !important; font-weight: 900; color: #000; transform: scale(1.02); }
        .striker-icon { color: #d35400; margin-right: 5px; opacity: 0; transition: opacity 0.3s; }
        .active-striker .striker-icon { opacity: 1; }

        .bowler-container { display: flex; flex-direction: column; align-items: flex-end; width: 350px; }
        .bowler-info { display: flex; align-items: center; gap: 15px; font-size: 16px; font-weight: 700; justify-content: flex-end; margin-bottom: 3px; }
        .this-over-wrapper { display: flex; align-items: center; justify-content: flex-end; gap: 10px; }
        .this-over-label { font-size: 12px; font-weight: bold; color: #555; letter-spacing: 0.5px; }
        .this-over { display: flex; gap: 6px; }
        
        /* --- BALL STYLES --- */
        
        /* Normal Run (Yellow Circle) */
        .ball-circle { 
            width: 24px; height: 24px; 
            background: radial-gradient(circle at 30% 30%, #fff, #f1c40f); 
            color: black; border-radius: 50%; font-size: 13px; font-weight: bold; 
            display: flex; align-items: center; justify-content: center; 
            border: 1px solid #000; 
        }
        
        /* WICKET (Red Square Box) */
        .wicket-box {
            width: 24px; height: 24px;
            background: #c0392b; /* Solid Red */
            color: white;
            font-size: 13px; font-weight: bold;
            display: flex; align-items: center; justify-content: center;
            border: 1px solid #fff;
            border-radius: 3px;
        }
        
        /* BOUNDARY 4 & 6 (DARKER BLUE Ball - Updated) */
        .boundary-ball {
            /* Changed gradient start from white to a medium blue for a darker look */
            background: radial-gradient(circle at 30% 30%, #4682b4, #000066); 
            color: white;
            border: 1px solid #fff;
        }
    </style>
</head>
<body>
    <div id="tour-display" class="tour-badge">TOURNAMENT</div>
    <div class="scoreboard-container">
        <div class="team-badge" id="t1-name">TEAM A</div>
        <div class="main-bar">
            <div class="batter-info">
                <div class="batter-row" id="row-1"><span><span class="striker-icon">üèè</span><span id="slot1-name">P1</span></span> <span><span id="slot1-score">0</span> (<span id="slot1-balls">0</span>)</span></div>
                <div class="batter-row" id="row-2"><span><span class="striker-icon">üèè</span><span id="slot2-name">P2</span></span> <span><span id="slot2-score">0</span> (<span id="slot2-balls">0</span>)</span></div>
            </div>
            <div class="center-score-pill">
                <div style="font-size:12px; color:#add8e6;">LIVE MATCH</div>
                <div class="big-score"><span id="total-runs">0</span>-<span id="total-wickets">0</span> <span class="overs" id="total-overs">0.0</span></div>
            </div>
            <div class="bowler-container">
                <div class="bowler-info"><span id="bwl-name">Bowler</span> <span><span id="bwl-fig">0-0</span></span></div>
                <div class="this-over-wrapper">
                    <span class="this-over-label">THIS OVER</span>
                    <div class="this-over" id="this-over-balls"></div>
                </div>
            </div>
        </div>
        <div class="team-badge" id="t2-name">TEAM B</div>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let previousRuns = 0, slot1PlayerName = "", slot2PlayerName = "";
        
        function animateScore(targetRuns) {
            const el = document.getElementById('total-runs');
            let current = previousRuns; if (current === targetRuns) return;
            let diff = Math.abs(targetRuns - current);
            let timer = setInterval(() => {
                if (current < targetRuns) current++; else current--; el.innerText = current;
                if (current === targetRuns) { clearInterval(timer); previousRuns = targetRuns; el.classList.remove('score-pop'); void el.offsetWidth; el.classList.add('score-pop'); }
            }, diff > 10 ? 10 : 40);
        }

        socket.on('updateData', (fullData) => {
            document.getElementById('tour-display').innerText = fullData.tournamentName;
            const data = fullData.currentMatch;

            if (data.runs !== previousRuns) animateScore(data.runs); else document.getElementById('total-runs').innerText = data.runs;

            document.getElementById('t1-name').innerText = data.team1;
            document.getElementById('t2-name').innerText = data.team2;
            document.getElementById('total-wickets').innerText = data.wickets;
            document.getElementById('total-overs').innerText = `${data.overs} (${data.maxOvers})`;
            document.getElementById('bwl-name').innerText = data.bowler.name;
            document.getElementById('bwl-fig').innerText = `${data.bowler.wickets}-${data.bowler.runs} (${data.bowler.overs})`;

            const s = data.striker, ns = data.nonStriker;
            if (slot1PlayerName !== s.name && slot1PlayerName !== ns.name) { slot1PlayerName = s.name; slot2PlayerName = ns.name; }
            let p1Data, p2Data, isSlot1Striker;
            if (s.name === slot1PlayerName) { p1Data = s; p2Data = ns; slot2PlayerName = ns.name; isSlot1Striker = true; }
            else { p1Data = ns; p2Data = s; slot1PlayerName = ns.name; slot2PlayerName = s.name; isSlot1Striker = false; }

            document.getElementById('slot1-name').innerText = p1Data.name;
            document.getElementById('slot1-score').innerText = p1Data.runs;
            document.getElementById('slot1-balls').innerText = p1Data.balls;
            document.getElementById('slot2-name').innerText = p2Data.name;
            document.getElementById('slot2-score').innerText = p2Data.runs;
            document.getElementById('slot2-balls').innerText = p2Data.balls;

            const r1 = document.getElementById('row-1'), r2 = document.getElementById('row-2');
            if (isSlot1Striker) { r1.classList.add('active-striker'); r2.classList.remove('active-striker'); }
            else { r1.classList.remove('active-striker'); r2.classList.add('active-striker'); }

            const overDiv = document.getElementById('this-over-balls');
            overDiv.innerHTML = "";
            data.thisOver.forEach(ball => {
                let cls;
                if (ball === 'W') {
                    cls = 'wicket-box';
                } else if (ball == 4 || ball == 6) {
                    cls = 'ball-circle boundary-ball';
                } else {
                    cls = 'ball-circle';
                }
                
                overDiv.innerHTML += `<div class="${cls}">${ball}</div>`;
            });
        });
    </script>
</body>
</html>